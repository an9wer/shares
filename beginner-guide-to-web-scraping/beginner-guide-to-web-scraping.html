<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="https://cdn.bootcss.com/reveal.js/3.6.0/css/reveal.min.css">
        <link rel="stylesheet" href="https://cdn.bootcss.com/reveal.js/3.6.0/css/theme/league.min.css">
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section data-markdown>
                    <textarea data-template>
                        ## 爬虫二三事
                        ---
                        ### by an9wer
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        1.  什么是爬虫

                        2.  爬虫的应用

                        3.  如何写一个爬虫

                        4.  爬虫进阶

                        5.  关于反爬虫

                        6.  爬虫实例
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        ### what is 爬虫 <!-- .element: style="margin-bottom: 12%;" -->

                        程序在浏览网页    <!-- .element: class="fragment" -->
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        ### use of 爬虫    <!-- .element: style="margin-bottom: 12%;" -->

                        - 企业：大数据平台，内容聚合平台        <!-- .element: class="fragment" style="margin-bottom: 15%;"-->
                        - 个人：小工具                        <!-- .element: class="fragment" -->
                    </textarea>
                </section>
                <section data-markdown style="font-size: 80%;">
                    <textarea data-template>
                        ### how to 爬虫   <!-- .element: style="margin-bottom: 5%;" -->

                        1.  send a request and get a response with content  <!-- .element: class="fragment" -->

                            - urllib & urllib2 & cookielib   <!-- .element: class="fragment" -->

                            - requests      <!-- .element: class="fragment" -->

                        2.  parse the response content  <!-- .element: class="fragment" -->

                            - beautifulsoup  <!-- .element: class="fragment" -->

                            - lxml          <!-- .element: class="fragment" -->

                            - re            <!-- .element: class="fragment" -->

                            - PhantomJS + selenium  <!-- .element: class="fragment" -->
                    </textarea>
                </section>
                <section data-markdown style="font-size: 80%;">
                    <textarea data-template>
                        ### step one

                        - requests.get(url, params=None, **kwargs)    <!-- .element: class="fragment" -->

                        - requests.post(url, data=None, json=None, **kwargs)    <!-- .element: class="fragment" -->

                        - requests.Response        <!-- .element: class="fragment" -->

                            - text, content, status_code, url, headers, cookies.    <!-- .element: class="fragment" -->

                        - requests.Session         <!-- .element: class="fragment" -->
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        ### step two

                        - BeautifulSoup.find_all()/find()       <!-- .element: class="fragment" -->

                          ![beautifulsoup find_all](./images/find_all.png)      <!-- .element: class="fragment" -->

                        - BeautifulSoup.select()        <!-- .element: class="fragment" -->

                          ![beautifulsoup select](./images/select.png)      <!-- .element: class="fragment" -->

                    </textarea>
                </section>

                <!--
                <section data-markdown>
                    <textarea data-template>
                        ### why is python
                        - Python 语法简洁，第三方库多，开发效率高。

                        - 网络 IO 的时间冲淡了 Python 的性能问题。

                        - Python 的爬虫生态完善。
                    </textarea>
                </section>
                -->

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ### advanced 爬虫
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ### 整站爬取

                            - 网站结构整齐：利用广度优先或者深度优先进行爬取。      <!-- .element: class="fragment" -->

                            - 网站结构凌乱：顺着页面中的 a 标签进行爬取，注意 url 的去重。    <!-- .element: class="fragment" -->
                        </textarea>
                    </section>
                    <section data-markdown style="font-size: 80%;">
                        <textarea data-template>
                            ### 多线程/多进程/分布式爬虫

                            爬虫本身是 IO 密集型应用，大多数花销都用在了网络 IO 的等待上，CPU 没有得到充分的利用。   <!-- .element: class="fragment" -->

                            - 多线程：受限于 Python 的 GIL，比较鸡肋。        <!-- .element: class="fragment" -->

                            - 多进程：IPC 进行任务的调度 (multiprocessing.Queue/Pipe)      <!-- .element: class="fragment" -->

                            - 分布式：任务池进行任务的调度 (redis)       <!-- .element: class="fragment" -->
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ### anit-爬虫
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ### 基于 request headers

                            - user-agent        <!-- .element: class="fragment" -->

                              ![headers](./images/headers.png)    <!-- .element: class="fragment" -->

                            - referer           <!-- .element: class="fragment" -->
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ### 基于 RPS

                            - proxy         <!-- .element: class="fragment" -->

                              ![proxies code](./images/proxies.png)     <!-- .element: class="fragment" -->
                        </textarea>
                    </section>
                    <section data-markdown style="font-size: 80%;">
                        <textarea data-template>
                            ### 基于 ajax/javascript

                            PhantomJS + selenium      <!-- .element: class="fragment" -->

                            - PhantomJS: a headless WebKit scriptable with a JavaScript API. It has fast and native support for various web standards: DOM handling, CSS selector, JSON, Canvas, and SVG.     <!-- .element: class="fragment" -->

                            - selenium: Selenium automates browsers. That's it! What you do with that power is entirely up to you.    <!-- .element: class="fragment" -->
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ### 基于验证码

                            # 卒     <!-- .element: class="fragment" -->
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ### 爬虫 in action
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ![login](./images/login.png)
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ![login form](./images/login_form.png)
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ![login elements](./images/login_elements.png)
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ![captcha](./images/captcha.gif)
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ![8888](./images/8888.png)
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ![login code](./images/login_code.png)
                        </textarea>
                    </section>
                </section>
            </div>
        </div>
        <script src="https://cdn.bootcss.com/headjs/1.0.3/head.min.js"></script>
        <script src="https://cdn.bootcss.com/reveal.js/3.6.0/js/reveal.min.js"></script>
        <script>
        Reveal.initialize({
            transition: 'convex',
            dependencies: [
                    // Interpret Markdown in <section> elements
                    { src: 'https://cdn.bootcss.com/reveal.js/3.6.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'https://cdn.bootcss.com/reveal.js/3.6.0/plugin/markdown/markdown.min.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    //Syntax highlight for <code> elements
                    { src: 'https://cdn.bootcss.com/reveal.js/3.6.0/plugin/highlight/highlight.min.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                ]
            });
        </script>
    </body>
</html>
